console.info(`${logPreface("JS")} index.js loaded`);var categoryColoumn=0;$(function(){initCategoryList(),$("[data-toggle=\"tooltip\"]").tooltip(),$("#database-user").val(getDatabaseUser()),$($(".img-preview")[getDefaultImage()-1]).addClass("img-preview-selected"),$(".img-preview").on("click",function(){$(".img-preview").removeClass("img-preview-selected"),$(this).addClass("img-preview-selected"),setDefaultImage($(this).attr("src").split("_")[0].split("/")[2])}),$("#btn-add-category").on("click",function(){let a=$("#input-add-category").val();isUniqueCategory(a)&&0<a.length&&(addCategory(a),$("#input-add-category").val(""))}),$("#change-user").on("show.bs.modal",function(){$("#modal-database-user").val(getDatabaseUser()),$("#confirm-user-change").prop("disabled",!0)}),$("#modal-database-user").keyup(function(){0<$(this).val().length?$("#confirm-user-change").prop("disabled",!1):$("#confirm-user-change").prop("disabled",!0)}),$("#confirm-user-change").click(function(){setDatabaseUser($("#modal-database-user").val()),$("#change-user").modal("hide"),location.reload()})});function addCategory(a){createCategory(a).then(function(b){let c=buildListElement(b.id,a);categoryColoumn++,$(`#category-list-${categoryColoumn%3}`).append(c),$("#category-count").text(categoryColoumn)}).catch(function(a){console.warn(a)})}function buildListElement(a,b){let c=document.createElement("li");$(c).addClass("list-group-item d-flex justify-content-between align-items-center"),$(c).text(b);let d=document.createElement("button");return $(d).addClass("btn btn-outline-danger btn-sm"),$(d).html(`<svg width="16px" height="16px" viewBox="0 0 16 16" class="bi bi-trash-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"/>
  </svg>`),$(d).attr("onclick",`removeCategory(${a})`),c.appendChild(d),c}function initCategoryList(){$("#category-list-0").empty(),$("#category-list-1").empty(),$("#category-list-2").empty(),getCategories().then(function(a){setConnectionStatus("connected"),a.forEach(a=>{categoryColoumn++;let b=buildListElement(a.id,a.name);$(`#category-list-${categoryColoumn%3}`).prepend(b)}),$("#category-count").text(categoryColoumn)}).catch(function(a){setConnectionStatus("error"),console.warn(a)})}function removeCategory(a){categoryColoumn=0,deleteCategory(a).then(function(){initCategoryList()}).catch(function(a){console.warn(a)})}function isUniqueCategory(a){let b=!0;for(let c=0;3>c;c++)$("#category-list-"+c).children().filter(function(){if($(this).text().trim().toLowerCase()===a.trim().toLowerCase()){let a=$(this);a.addClass("impulse"),setTimeout(function(){a.removeClass("impulse")},2e3),b=!1}});return b}function setConnectionStatus(a){let b=$("#connection-status");"connected"==a?(b.removeClass("text-danger text-warning"),b.addClass("text-success")):"error"==a?(b.removeClass("text-success text-warning"),b.addClass("text-danger")):(b.removeClass("text-danger text-success"),b.addClass("text-warning"))}