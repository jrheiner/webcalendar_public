console.info(`${logPreface("JS")} list.js loaded`),$(function(){getEvents().then(function(a){initListOfEvents(a)}).catch(function(a){console.warn(a)}),$("[data-toggle=\"tooltip\"]").tooltip(),$(".clockpicker").clockpicker(),$("#expandAll").on("click",function(){$(".collapse.multi-collapse").addClass("show")}),$("#collapseAll").on("click",function(){$(".collapse.multi-collapse").removeClass("show")}),$("#sortNew").on("click",function(){getEvents().then(function(a){initListOfEvents(a,"new",!0),0!=$("#searchBar").val()&&$("#searchBar").trigger("onkeyup")}).catch(function(a){console.warn(a)}),$("#sortOld").removeClass("active"),$("#sortNew").addClass("active")}),$("#sortOld").on("click",function(){getEvents().then(function(a){initListOfEvents(a,"old",!0),0!=$("#searchBar").val()&&$("#searchBar").trigger("onkeyup")}).catch(function(a){console.warn(a)}),$("#sortNew").removeClass("active"),$("#sortOld").addClass("active")});let a=$("#btn-go-top");$(window).scroll(function(){300<$(window).scrollTop()?a.css("display","block"):a.css("display","none")}),a.on("click",function(a){a.preventDefault(),$("html, body").animate({scrollTop:0},"300")})});function initListOfEvents(a,b="new",c=!1){let d=new Map,e=new Map;a.forEach(a=>{d.has(dateFormat(a.start))||d.set(dateFormat(a.start),createCollapse(toUNIX(a.start)))}),e=sortMapByDate(d,b),a.forEach(a=>{let b=createEventCard(a),c=e.get(dateFormat(a.start)).getElementsByClassName("card-body")[0];if(0!=$(c).children().length){let a=!1;$(c).children().each(function(){if(new Date(`1/1/2000/${$(this).attr("data-time")}`)>=new Date(`1/1/2000/${$(b).attr("data-time")}`))return $(this).before($(b)),a=!0,!1}),a||c.appendChild(b)}else c.appendChild(b)});let f=document.getElementById("event-accordion");c&&$(f).empty(),e.forEach(a=>{f.appendChild(a)}),null==document.getElementById("list-today")?null!=document.getElementById("list-tomorrow")&&document.getElementById("list-tomorrow").scrollIntoView({behavior:"smooth",block:"center"}):document.getElementById("list-today").scrollIntoView({behavior:"smooth",block:"center"})}function createCollapse(a){let b=!1,c=a,d=singleDateDisplay(fromUNIX(a)),e=document.createElement("div");e.className="card";let f=document.createElement("div");f.className="card-header";let g=document.createElement("h2");g.className="mb-0";let h=document.createElement("button");h.className="btn btn-link btn-block text-left collapsed";let i=new Date;return isSameDay(a,toUNIX(i))?(h.innerHTML=`${d} <span class='badge badge-primary' id='list-today'>Today</span>`,b=!0):isTomorrow(a,toUNIX(i))?h.innerHTML=`${d} <span class='badge badge-secondary' id='list-tomorrow'>Tomorrow</span>`:h.innerText=d,$(h).attr("type","button"),$(h).attr("data-toggle","collapse"),$(h).attr("data-target",`#id${c}`),collapseBody=document.createElement("div"),collapseBody.className="collapse multi-collapse",b&&(collapseBody.className=`${collapseBody.className} show`),$(collapseBody).attr("id",`id${c}`),collapseBodyCardHolder=document.createElement("div"),collapseBodyCardHolder.className="card-body",collapseBodyCardHolder.id="card-body",g.appendChild(h),f.appendChild(g),collapseBody.appendChild(collapseBodyCardHolder),e.appendChild(f),e.appendChild(collapseBody),e}function searchBar(){let a,b,c;for(a=$("#searchBar").val().toUpperCase(),cardTitle=$("#event-accordion").find(".card-title"),$(".collapse.multi-collapse").addClass("show"),b=0;b<cardTitle.length;b++)c=cardTitle[b].innerText,cardTitle[b].innerHTML=c,index=c.toUpperCase().indexOf(a),0<=index?(1<=a.length&&(cardTitle[b].innerHTML=`<span class='text-muted'>${c.substring(0,index)}</span>${c.substring(index,index+a.length)}<span class='text-muted'>${c.substring(index+a.length)}</span>`),$(cardTitle).eq(b).parents().eq(2).show(),$(cardTitle).eq(b).parents().eq(5).show()):$(cardTitle).eq(b).parents().eq(2).hide(),0==$(cardTitle).eq(b).parents().eq(3).children().filter(":visible").length&&$(cardTitle).eq(b).parents().eq(5).hide();0==$("#event-accordion").children().filter(":visible").length?$("#search-invalid").show():$("#search-invalid").hide()}